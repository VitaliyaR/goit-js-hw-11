{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50344127-726c85bb6f98eba42715a8612'; // ключ \n\nexport const getImagesByQuery = async (query) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n      },\n    });\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n};\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\nlet closeAttemptCount = 0;\nlet isLightboxOpen = false;\n\nexport const createGallery = (images) => {\n  const galleryContainer = document.querySelector('.gallery');\n\n  const markup = images\n    .map(image => {\n      return `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n          </a>\n          <div class=\"image-info\">\n            <div class=\"info-labels\">\n              <span>Likes</span>\n              <span>Views</span>\n              <span>Comments</span>\n              <span>Downloads</span>\n            </div>\n            <div class=\"info-values\">\n              <span>${image.likes}</span>\n              <span>${image.views}</span>\n              <span>${image.comments}</span>\n              <span>${image.downloads}</span>\n            </div>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      close: false, // вимикаємо стандартну кнопку закриття\n    });\n\n    // Відстежуємо відкриття/закриття\n    lightbox.on('shown.simplelightbox', () => {\n      isLightboxOpen = true;\n    });\n\n    lightbox.on('closed.simplelightbox', () => {\n      isLightboxOpen = false;\n      closeAttemptCount = 0;\n    });\n\n    setupCustomCloseBehavior();\n  } else {\n    lightbox.refresh();\n  }\n};\n\nfunction setupCustomCloseBehavior() {\n  // натискання ESC\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && isLightboxOpen) {\n      handleCloseAttempt();\n    }\n  });\n\n  // клік поза зображенням (по оверлею)\n  document.addEventListener('click', (e) => {\n    const overlay = document.querySelector('.sl-overlay');\n    if (isLightboxOpen && overlay && e.target === overlay) {\n      handleCloseAttempt();\n    }\n  });\n}\n\nfunction handleCloseAttempt() {\n  closeAttemptCount += 1;\n  console.log(`Close attempt #${closeAttemptCount}`);\n\n  if (closeAttemptCount >= 3) {\n    lightbox.close();\n    closeAttemptCount = 0;\n  }\n}\n\n// інші функції\nexport const clearGallery = () => {\n  document.querySelector('.gallery').innerHTML = '';\n};\n\nexport const showLoader = () => {\n  document.getElementById('loader').style.display = 'block';\n};\n\nexport const hideLoader = () => {\n  document.getElementById('loader').style.display = 'none';\n};\n\n\n","\nimport { getImagesByQuery } from './js/pixabay-api.js';\n\n\nimport { createGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  \n  const query = input.value.trim();\n  \n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  showLoader();\n  clearGallery();\n\n  const images = await getImagesByQuery(query);\n\n  if (images.length === 0) {\n    iziToast.info({\n      title: 'No results',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } else {\n    createGallery(images);\n  }\n  \n  hideLoader();\n});\n"],"names":["API_KEY","getImagesByQuery","query","axios","error","lightbox","closeAttemptCount","isLightboxOpen","createGallery","images","galleryContainer","markup","image","SimpleLightbox","setupCustomCloseBehavior","e","handleCloseAttempt","overlay","clearGallery","showLoader","hideLoader","form","input","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCAEHC,EAAmB,MAAOC,GAAU,CAC/C,GAAI,CAUF,OATiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACP,CAAK,GACe,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,EACR,CACH,EChBA,IAAIC,EAAW,KACXC,EAAoB,EACpBC,EAAiB,GAEd,MAAMC,EAAiBC,GAAW,CACvC,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAASF,EACZ,IAAIG,GACI;AAAA;AAAA,qBAEQA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAUxCA,EAAM,KAAK;AAAA,sBACXA,EAAM,KAAK;AAAA,sBACXA,EAAM,QAAQ;AAAA,sBACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAKhC,EACA,KAAK,EAAE,EAEVF,EAAiB,mBAAmB,YAAaC,CAAM,EAElDN,EAmBHA,EAAS,QAAO,GAlBhBA,EAAW,IAAIQ,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,MAAO,EACb,CAAK,EAGDR,EAAS,GAAG,uBAAwB,IAAM,CACxCE,EAAiB,EACvB,CAAK,EAEDF,EAAS,GAAG,wBAAyB,IAAM,CACzCE,EAAiB,GACjBD,EAAoB,CAC1B,CAAK,EAEDQ,IAIJ,EAEA,SAASA,GAA2B,CAElC,SAAS,iBAAiB,UAAYC,GAAM,CACtCA,EAAE,MAAQ,UAAYR,GACxBS,GAEN,CAAG,EAGD,SAAS,iBAAiB,QAAUD,GAAM,CACxC,MAAME,EAAU,SAAS,cAAc,aAAa,EAChDV,GAAkBU,GAAWF,EAAE,SAAWE,GAC5CD,GAEN,CAAG,CACH,CAEA,SAASA,GAAqB,CAC5BV,GAAqB,EACrB,QAAQ,IAAI,kBAAkBA,CAAiB,EAAE,EAE7CA,GAAqB,IACvBD,EAAS,MAAK,EACdC,EAAoB,EAExB,CAGO,MAAMY,EAAe,IAAM,CAChC,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,EAEaC,EAAa,IAAM,CAC9B,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OACpD,EAEaC,EAAa,IAAM,CAC9B,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,MACpD,EC5FMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EAE5DA,EAAK,iBAAiB,SAAU,MAAON,GAAM,CAC3CA,EAAE,eAAc,EAEhB,MAAMb,EAAQoB,EAAM,MAAM,KAAI,EAE9B,GAAI,CAACpB,EAAO,CACVqB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDJ,IACAD,IAEA,MAAMT,EAAS,MAAMR,EAAiBC,CAAK,EAEvCO,EAAO,SAAW,EACpBc,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,0EACf,CAAK,EAEDf,EAAcC,CAAM,EAGtBW,GACF,CAAC"}